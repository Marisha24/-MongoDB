### Введение в MongoDB
MongoDB — это популярная open-source документоориентированная база данных, относящаяся к классу NoSQL-решений. Она предназначена для быстрой и удобной работы с большими объемами данных, предоставляя разработчикам мощную систему хранения и доступ к данным, свободную от ограничений классической реляционной модели. MongoDB предлагает документоориентированную модель данных, благодаря чему работает быстрее, обладает лучшей масштабируемостью, ее легче использовать. 
MongoDB разработана на языке C++, что облегчает её переносимость на разнообразные платформы. Она успешно запускается на Windows, Linux, macOS и Solaris. Пользователи также могут самостоятельно собрать MongoDB из исходников, однако предпочтительнее пользоваться официальными сборками с сайта производителя.
Широко используемым стандартом для передачи и хранения данных является JSON (нотация объектов JavaScript), который хорошо справляется с описанием сложной структуры данных. Внутреннее представление данных в MongoDB напоминает JSON, однако фактически применяется специальный бинарный формат, называемый BSON (binary JSON).
Использование BSON существенно повышает производительность операций над данными, ускоряя процессы поиска и обработки. Однако стоит отметить один нюанс: в формате BSON данные занимают больше пространства по сравнению с обычным JSON. Тем не менее этот недостаток компенсируется значительным выигрышем в скорости выполнения операций.

### Документы вместо строк
В то время как реляционные базы данных сохраняют информацию в виде строк, MongoDB работает с документами. В отличие от простых строк, документы способны хранить сложные и неоднородные данные. Документ можно рассматривать как коллекцию пар «ключ-значение».
Сам ключ выступает в роли метки, связанной с определенным фрагментом данных. Несмотря на различия, существует общая черта, роднящая MongoDB с реляционными базами данных: понятие уникального идентификатора. В реляционных системах роль уникального идентификатора играет первичный ключ — столбец с неповторимыми значениями. Аналогичным образом, в каждом документе MongoDB присутствует специальное поле `_id`, которое служит уникальным идентификатором. Если оно не задаётся вручную, MongoDB автоматически присваивает каждому документу уникальное значение.
Каждому ключу сопоставляется определенное значение. Но здесь также надо учитывать одну особенность: если в реляционных базах есть четко очерченная структура, где есть поля, и если какое-то поле не имеет значение, ему (в зависимости от настроек конкретной бд) можно присвоить значение NULL. В MongoDB все иначе. Если какому-то ключу не сопоставлено значение, то этот ключ просто опускается в документе и не употребляется.
Документ можно представить как объект, хранящий некоторую информацию. В некотором смысле он подобен строкам в реляционных субд, где строки хранят информацию об отдельном элементе. Например, типичный документ:
![[Pasted image 20250806175148.png]]
Для каждого документа в MongoDB определен уникальный идентификатор, который называется _id.  При добавлении документа в коллекцию данный идентификатор создается автоматически. Однако разработчик может сам явным образом задать идентификатор, а не полагаться на автоматически генерируемые, указав соответствующий ключ и его значение в документе. Если идентификатор не задан явно, то MongoDB создает специальное бинарное значение размером 12 байт. Это значение состоит из нескольких сегментов: значение типа timestamp размером 4 байта, идентификатор машины из 3 байт, идентификатор процесса из 2 байт и счетчик из 3 байт. Таким образом, первые 9 байт гарантируют уникальность среди других машин, на которых могут быть реплики базы данных. А следующие 3 байта гарантируют уникальность в течение одной секунды для одного процесса. Такая модель построения идентификатора гарантирует с высокой долей вероятности, что он будет иметь уникальное значение, ведь она позволяет создавать до 16 777 216 уникальных объектов ObjectId в секунду для одного процесса.
### Коллекции
Если в традиционном мире SQL есть таблицы, то в мире MongoDB есть коллекции. И если в реляционных БД таблицы хранят однотипные жестко структурированные объекты, то в коллекции могут содержать самые разные объекты, имеющие различную структуру и различный набор свойств. 
Каждая коллекция имеет свое уникальное имя - произвольный идентификатор, состоящий из не более чем 128 различных алфавитноцифровых символов и знака подчеркивания.

**Явное создание коллекции**
В предыдущих темах коллекция создавалась неявно автоматически при добавлении в нее первых данных. Но мы также можем создать ее явным образом, применив метод db.createCollection(name, options), где `name` - название коллекции, а `options` - необязательный объект с дополнительными настройками инициализации. Например:
![[Pasted image 20250806180311.png]]
Таким образом, создается коллекция accounts.

**Переименование коллекции**
В процессе работы, возможно, потребуется изменить название коллекции. Например, если при первом добавлении данных в ее названии была опечатка. И чтобы не удалять и затем пересоздавать коллекцию, следует использовать функцию `renameCollection`:
![[Pasted image 20250806180437.png]]
И если переименование пройдет удачно, то консоль отобразит:
![[Pasted image 20250806180500.png]]







_____________________________________

### Динамические схемы

### Именование

### Базы данных

### Начало работы с MongoDB
Для установки MongoDB загрузим один распространяемых пакетов с официального сайта http://www.mongodb.org/downloads. Официальный сайт предоставляет пакеты дистрибутивов для различных платформ: Windows, Linux, MacOS, Solaris. И различные версии: как 32-х битные, так и 64-х битные. При использовании MongoDB следует учитывать, что MongoDB использует отображаемые в памяти файлы, поэтому на 32-х разрядных системах ее действие ограничено 2 Гб памяти. Чтобы поддерживать базы данных большего объема на 32-х разрядных системах, требуются дополнительные усилия. При развертывании на 64-х разрядных системах подобных ограничений нет.
Для загрузки и установки пакета выберем нужную операционную систему и подходящий тип пакета:
![[Pasted image 20250806174423.png]]
Для ОС Windows загрузочный пакет доступен в виде файла установщика с расширением msi. После запуска установщика для ОС Windows после принятия лицензионного соглашения нам отобразится окно выбора типа настроек:
![[Pasted image 20250806174407.png]]
Выберем в нем Custom. По умолчанию все файлы устанавливаются по пути C:\Program Files\MongoDB. Но мы изменим каталог установки. Для этого в начале создадим на диске C новую папку mongodb и затем укажем ее в качестве места установки:
![[Pasted image 20250806174024.png]]
Все остальные настройки оставим по умолчанию

**Знакомство с оболочкой MongoDB**
Если после установки мы откроем папку C:\mongodb\bin, то сможем найти там кучу приложений, которые выполняют определенную роль. Вкратце рассмотрим их
Запуск оболочки
![[Pasted image 20250806174106.png]]
bsondump: считывает содержимое BSON-файлов и преобразует их в читабельный формат, например, в JSON 
mongo: представляет консольный интерфейс для взаимодействия с базами данных, своего рода консольный клиент
mongod: сервер баз данных MongoDB. Он обрабатывает запросы, управляет форматом данных и выполняет различные операции в фоновом режиме по управлению базами данных 
mongodump: утилита создания бэкапа баз данных 
mongoexport: утилита для экспорта данных в форматы JSON, TSV или CSV 
mongofiles: утилита, позволяющая управлять файлами в системе GridFS 
mongoimport: утилита, импорирующая данных в форматах JSON, TSV или CSV в базу данных MongoDB 
mongooplog: приложение, позволяющее опрашивать удаленные серверы на наличие операций с БД и применять полученные данные к локальному серверу
mongoperf: проверяет производительность жесткого диска на предмет операций ввода-вывода 
mongorestore: позволяет записывать данные из дампа, созданного mongodump, в новую или существующую базу данных 
mongos: служба маршрутизации MongoDB, которая помогает обрабатывать запросы и определять местоположение данных в кластере MongoDB 
mongorestat: представляет счетчики операций с БД 
mongotop: предоставляет способ подсчета времени, затраченного на операции чтения-записи в БД






**Клиент MongoDB**
После установки надо создать на жестком диске каталог, в котором будут находиться базы данных MongoDB. В ОС Windows по умолчанию MongoDB хранит базы данных по пути C:\data\db, поэтому, если вы используете Windows, вам надо создать соответствующий каталог. В ОС Linux и MacOS каталогом по умолчанию будет /data/db.
Основные операции с оболочкой

**Типы данных**

Основные типы данных

Даты

Массивы

Вложенные документы

_id и ObjectId

Использование оболочки MongoDB

Советы по использованию оболочки

Запуск скриптов с помощью оболочки

Создание файла .mongorc.js

Настройка приглашения

Редактирование сложных переменных

Неудобные имена коллекций
